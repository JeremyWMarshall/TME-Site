// Ajatix Lightbox
// Copyright (C) 2010-2015 Ajatix. All rights reserved.
// http://www.ajatix.com
// Unregistered copy.
// Any usage except for the purpose of evaluation is strictly prohibited.
var AjxEvent=AjxEvent||(function(){function d(a){a=a||window.event;if(a.isFixed)return a;a.isFixed=!0;a.preventDefault=a.preventDefault||function(){this.returnValue=!1};a.stopPropagation=a.stopPropagation||function(){this.cancelBubble=!0};a.target||(a.target=a.srcElement);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement==a.target?a.toElement:a.fromElement);if(null==a.pageX&&null!=a.clientX){var b=document.documentElement,c=document.body;a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b.clientTop||0)}!a.which&&a.button&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a}function f(a){a=d(a);var b=this.events[a.type],c;for(c in b)!1===b[c].call(this,a)&&(a.preventDefault(),a.stopPropagation())}var g=0;return{add:function(a,b,c){a.setInterval&&a!=window&&!a.frameElement&&(a=window);c.guid||(c.guid=++g);a.events&&null!=a.events||(a.events={},a.handle=function(b){if('undefined'!==typeof AjxEvent)return f.call(a, b)});a.events[b]||(a.events[b]={},a.addEventListener?a.addEventListener(b,a.handle,!1):a.attachEvent&&a.attachEvent('on'+b,a.handle));a.events[b][c.guid]=c},remove:function(a,b,c){var e=a.events&&a.events[b];if(e){delete e[c.guid];for(var d in e)return;a.removeEventListener?a.removeEventListener(b,a.handle,!1):a.detachEvent&&a.detachEvent('on'+b,a.handle);delete a.events[b];for(d in a.events)return;try{delete a.handle,delete a.events}catch(f){try{a.removeAttribute('handle'),a.removeAttribute('events')}catch(g){a.events=null,a.handle=null}}}}}})();(function(){var d=document, de=d.documentElement, IE=d.all&&!window.opera;var AjxAjax=function(c){this.AjaxFailedAlert='Your browser does not support the Ajax';this.URLString=this.requestFile='';this.Preview=!1;c=c.split('?');c[0]&&(this.requestFile=c[0]);c[1]&&(this.URLString=c[1]);this.encodeURIString=!0;this.noCaching=!1;this.timeout=null;this.onCompletion=function(){};this.createAJAX=function(){try{this.xmlhttp=new ActiveXObject('Msxml2.XMLHTTP')}catch(b){try{this.xmlhttp=new ActiveXObject('Microsoft.XMLHTTP')}catch(a){this.xmlhttp=null}}this.xmlhttp||'undefined'==typeof XMLHttpRequest||(this.xmlhttp=new XMLHttpRequest);this.xmlhttp||(this.failed=!0)};this.setVar=function(b,a){this.URLString=3>this.URLString.length?b+'='+a:this.URLString+('&'+b+'='+a)};this.encVar=function(b,a){return encodeURIComponent(b)+'='+encodeURIComponent(a)};this.encodeURLString=function(b){b=b.split('&');for(i=0;i<b.length;i++){var a=b[i].split('=');-1!=a[0].indexOf('amp;')&&(a[0]=a[0].substring(4));b[i]=this.encVar(a[0],a[1])}return b.join('&')};this.runAJAX=function(b){this.responseStatus=Array(2);if(this.failed&&this.AjaxFailedAlert)this.elementObj&&(this.elementObj.innerHTML=this.AjaxFailedAlert),this.onCompletion();else if(b&&(this.URLString=this.URLString.length?this.URLString+'&'+b:b),this.encodeURIString&&(''!=this.URLString&&(this.URLString=this.encodeURLString(this.URLString)),this.noCaching&&(b=(new Date).getTime(),this.setVar('rndval',b))),this.xmlhttp){var a=this;b=this.requestFile+(''!=this.URLString?'?':'')+this.URLString;try{this.xmlhttp.open('get',b,!0)}catch(c){this.elementObj&&(this.elementObj.innerHTML=this.Preview?'Ajax content will be shown here.':'Ajax error.');this.URLString='';this.xmlhttp.abort();this.onCompletion();return}this.xmlhttp.onreadystatechange=function(){switch(a.xmlhttp.readyState){case 4:clearTimeout(a.timeout),a.response=a.xmlhttp.responseText,a.responseXML=a.xmlhttp.responseXML,a.responseStatus[0]=a.xmlhttp.status,a.responseStatus[1]=a.xmlhttp.statusText,a.elementObj&&(a.elementObj.innerHTML=200==a.responseStatus[0]||0==a.responseStatus[0]?a.response:a.responseStatus[1],a.onCompletion()),a.URLString=''}};this.onAbortWaiting=function(){a.xmlhttp.abort();a.URLString='';a.elementObj&&(a.elementObj.innerHTML='Time over');a.onCompletion()};this.timeout=setTimeout(this.onAbortWaiting,1E4);try{this.xmlhttp.send(null)}catch(d){clearTimeout(this.timeout),this.URLString='',this.elementObj&&(b='',d.description?b=d.description:d.message&&(b=d.message),this.elementObj.innerHTML=b),this.xmlhttp.abort(),this.onCompletion()}}};this.createAJAX()};function onLoad(){var on='AJXLightboxAHQJEcD';var hasTouch=('ontouchstart' in window);var ajax=null;var overlay=createDiv(on+'_overlay', d.body);overlay.style.opacity=0;var lb=createDiv(on, d.body);lb.currentType='none';lb.index=-1;lb.zoomed=false;var outline=createDiv(on+'_outline', lb);var outer=createDiv(on+'_outer', lb);var inner=createDiv(on+'_inner', outer);var cross_img=d.createElement('img');cross_img.id=on+'_cross_img';inner.appendChild(cross_img);cross_img.style.zIndex=1;var html_div_cur=null, html_div_old=null;var img=d.createElement('img');img.id=on+'_img';inner.appendChild(img);img.style.opacity=0;img.style.zIndex=4;var div_v=d.createElement('div');div_v.id=on+'_video';div_v.style.zIndex=5;inner.appendChild(div_v);var cap=createDiv(on+'_cap', outer);cap.style.opacity=0;var capBack=createDiv('', cap);capBack.style.opacity=0.30;capBack.style.filter='alpha(opacity=30)';var capText=d.createElement('p');cap.appendChild(capText);var firstLink=null;var divs=d.getElementsByTagName('div');var ourDivs=[];for(var i=0;i<divs.length;i++){if(divs[i].className==on||divs[i].className==on+'_center_wrapper'){if(divs[i].className==on){ourDivs.push(divs[i]);}}}for(var i=0;i<ourDivs.length;i++){var divs_=ourDivs[i].getElementsByTagName('div');var thumbs=[];var galLinks=[];for(var j=0;j<divs_.length;j++){if(divs_[j].className==on+'awrapper'){thumbs[thumbs.length]=divs_[j];var ans=divs_[j].getElementsByTagName('a');if(ans.length>0){galLinks.push(ans[0]);}}}for(var j=0;j<thumbs.length;j++)attachHoverEvents(thumbs[j]);for(var j=0;j<galLinks.length;j++){var lnk=galLinks[j];lnk.contType='img';lnk.links=galLinks;lnk.index=j;if(lnk.href.indexOf('inline=true')>-1){var val=getParamFromUrl(lnk.href,'width');if(val!=''){lnk.vwidth=val;}val=getParamFromUrl(lnk.href,'height');if(val!=''){lnk.vheight=val;}var token=/#([^?]+)\?/.exec(lnk.href);if(token!=null){lnk.inlineid=token[1];lnk.contType='htmlinline';}}if(lnk.href.indexOf('ajxiframe=true')>-1){var val=getParamFromUrl(lnk.href,'ajxwidth');lnk.vwidth=(val!=''?val:400);val=getParamFromUrl(lnk.href,'ajxheight');lnk.vheight=(val!=''?val:300);var url=lnk.href.split('?');if(url[0]){lnk.iframeurl=url[0];if(url[1]){url[1]=encodeURLParams(url[1], '!ajxiframe!ajxwidth!ajxheight!');lnk.iframeurl+=(url[1]!=''?'?':'')+url[1];}lnk.contType='htmlinframe';}}if(lnk.href.indexOf('ajxajax=true')>-1){var val=getParamFromUrl(lnk.href,'ajxwidth');if(val!=''){lnk.vwidth=val;}val=getParamFromUrl(lnk.href,'ajxheight');if(val!=''){lnk.vheight=val;}var url=lnk.href.split('?');if(url[0]){lnk.ajaxurl=url[0];if(url[1]){url[1]=encodeURLParams(url[1], '!ajxajax!ajxwidth!ajxheight!');lnk.ajaxurl+=(url[1]!=''?'?':'')+url[1];}lnk.contType='htmlajax';}}if(lnk.href.indexOf('ajximg')>-1){lnk.vProvider='youtube';if(lnk.href.indexOf('vimeo.com')>-1){lnk.vProvider='vimeo';}var val=getParamFromUrl(lnk.href,'v');if(val!=''){lnk.videourl=val;}val=getParamFromUrl(lnk.href,'width');if(val!=''){lnk.vwidth=val;}val=getParamFromUrl(lnk.href,'height');if(val!=''){lnk.vheight=val;}val=getParamFromUrl(lnk.href,'ajximg');if(val!=''){lnk.href=val;}}if(i==0&&j==0)firstLink=lnk;AjxEvent.add(lnk, 'click', function(event){event.preventDefault();event.stopPropagation();lb.currentType='none';lb.count=this.links.length;showImage(this, true);return false;});}}var loading=createDiv(on+'_loading',lb);var close=createDiv(on+'_close',lb);if(IE)fixPng(close, '30px', '30px');close.style.opacity=0;close.onclick=loading.onclick=outer.onclick=overlay.onclick=function(){if(lb.draging)return;fadeTo(close, 0, 150);fadeTo(cap, 0, 100);var bHtml=(lb.currentType.indexOf('html')==0);if(!bHtml){clearHtmlDiv(div_v);}loading.style.display=div_v.style.display='none';var pos=getPosition(lb.thumb);moveTo([[lb,{left:pos.x,top:pos.y,width:lb.thumbWidth,height:lb.thumbHeight}],[inner,{height:lb.thumbHeight}]],function(){lb.style.display='none';lb.index=-1;lb.zoomed=false;if(bHtml){if(html_div_cur!=null){inner.removeChild(html_div_cur);html_div_cur=null;}}});fadeTo(overlay, 0);};img.deltaStartXY=null;function touchStartEndResizeImg(e){img.resizing=false;img.deltaStartXY=null;if(e.touches.length<2){return;}var dx=e.touches[0].pageX-e.touches[1].pageX;var dy=e.touches[0].pageY-e.touches[1].pageY;img.deltaStartXY={d:Math.sqrt(dx*dx+dy*dy),width:parseInt(lb.style.width),height:parseInt(lb.style.height),top:parseInt(lb.style.top),left:parseInt(lb.style.left)};return false;}function touchResizeImg(e){if(e.touches.length<2){return;}if(img.resizing&&img.resizing==true)return;img.resizing=true;var dx=e.touches[0].pageX-e.touches[1].pageX;var dy=e.touches[0].pageY-e.touches[1].pageY;var newLen=Math.sqrt(dx*dx+dy*dy);var deltaX=img.deltaStartXY.d-newLen;if(Math.abs(deltaX)<5){img.resizing=false;return;}var deltaY=deltaX*img.deltaStartXY.height/img.deltaStartXY.width;ResizeImg(deltaX, deltaY, img.deltaStartXY);img.resizing=false;return false;}if(hasTouch){AjxEvent.add(img, 'touchstart', touchStartEndResizeImg);AjxEvent.add(img, 'touchmove', touchResizeImg);AjxEvent.add(img, 'touchend', touchStartEndResizeImg);AjxEvent.add(img, 'touchleave', touchStartEndResizeImg);}var dragMaster=(function(){ var mouseDownAt;var dragObject;var oneTouch=true;function mouseDown(evt){if(hasTouch){if(evt.touches.length>1){oneTouch=false;return;}}else if(evt.which!=1){oneTouch=false;return;}var e=(hasTouch?evt.touches[0]:evt);mouseDownAt={x:e.pageX, y:e.pageY, element:this};clearDrag();addDocumentEventHandlers();return false;}function mouseMove(evt){if(hasTouch&&evt.touches.length>1){oneTouch=false;return;}var e=(hasTouch?evt.touches[0]:evt);if(mouseDownAt){if(Math.abs(mouseDownAt.x-e.pageX)<5&&Math.abs(mouseDownAt.y-e.pageY)<5){return false;}var elem =mouseDownAt.element;dragObject=elem;var mouseOffset={x:mouseDownAt.x-parseInt(lb.style.left), y:mouseDownAt.y-parseInt(lb.style.top)};mouseDownAt=null;lb.draging=true;cross_img.style.cursor=img.style.cursor='move';dragObject.onDragStart(mouseOffset);}if(dragObject)dragObject.onDragMove(e.pageX, e.pageY);return false;}function clearDrag(){oneTouch=true;if(dragObject){lb.draging=false;cross_img.style.cursor=img.style.cursor='';dragObject=null;}}function mouseUp(){removeDocumentEventHandlers();if(!dragObject){mouseDownAt=null;if(hasTouch&&oneTouch){loading.onclick();}}else{setTimeout(clearDrag, 150);}}function cancelSelect(){return false;}function addDocumentEventHandlers(){if(hasTouch){AjxEvent.add(d, 'touchmove', mouseMove);AjxEvent.add(d, 'touchend', mouseUp);}else{AjxEvent.add(d, 'mousemove', mouseMove);AjxEvent.add(d, 'mouseup', mouseUp);}AjxEvent.add(d, 'dragstart', cancelSelect);if(d.body)AjxEvent.add(d.body, 'selectstart', cancelSelect);}function removeDocumentEventHandlers(){if(hasTouch){AjxEvent.remove(d, 'touchmove', mouseMove);AjxEvent.remove(d, 'touchend', mouseUp);}else{AjxEvent.remove(d, 'mousemove', mouseMove);AjxEvent.remove(d, 'mouseup', mouseUp);}AjxEvent.remove(d, 'dragstart', cancelSelect);if(d.body)AjxEvent.remove(d.body, 'selectstart', cancelSelect);}return{makeDraggable:function(element){if(hasTouch){AjxEvent.add(element, 'touchstart', mouseDown);}else{AjxEvent.add(element, 'mousedown', mouseDown);}},makeUnDraggable:function(element){if(hasTouch){AjxEvent.remove(element, 'touchstart', mouseDown);}else{AjxEvent.remove(element, 'mousedown', mouseDown);}}}}());img.mouseOffset=null;lb.draging=false;img.onDragStart=function(offset){mouseOffset=offset;};img.onDragMove=function(x, y){lb.style.top= y-mouseOffset.y+'px';lb.style.left=x-mouseOffset.x+'px';};dragMaster.makeDraggable(img);AjxEvent.add(window, 'resize',function(){if(lb.index>=0){showImage(lb.links[lb.index],false,lb.zoomed);}});function preload(){try{var lnk;if(lb.index>0){lnk=lb.links[lb.index-1];if(lnk.contType=='img'){var primg=new Image();primg.src=lnk.href;}}if(lb.index<lb.links.length-1){lnk=lb.links[lb.index+1];if(lnk.contType=='img'){var nximg=new Image();nximg.src=lnk.href;}}}catch(e){}}function clearHtmlDiv(a){var fs=a.getElementsByTagName('iframe');if(fs.length>0){fs[0].src='';}a.innerHTML='';}function attachHoverEvents(e){e.onmouseover=function(){if(this.className.indexOf("ajxover")==-1)this.className+=" ajxover";};e.onmouseout=function(){this.className=this.className.replace(new RegExp(" ?ajxover\\b"), "");};}function showImage(e, fromThumb, fullSize){clearHtmlDiv(div_v);playsVideo=false;div_v.style.display='none';cap.style.display='none';cap.style.opacity=0;capText.innerHTML=e.title;lb.links=e.links;if(lb.index!=e.index){lb.zoomed=false;}lb.index=e.index;var o=e;var oo=e;var imgs=e.getElementsByTagName('img');if(imgs.length>0)o=imgs[0];lb.thumb=o;lb.thumbWidth=o.offsetWidth;lb.thumbHeight=o.offsetHeight;var pos=getPosition(lb.thumb);if(fromThumb){outer.style.visibility='hidden';lb.style.left=pos.x+'px';lb.style.top=pos.y+'px';lb.style.width=lb.thumbWidth+'px';outline.style.visibility='hidden';inner.style.height=lb.style.height=lb.thumbHeight+'px';}lb.style.display=loading.style.display='block';var afterload=function(o){img.style.opacity=0;img.style.display='none';var _this=o;_this.onload=null;ajax=null;outline.style.visibility='visible';if(oo.contType=='img'){img.src=_this.src;if(fromThumb){img.style.opacity=1;img.style.display='block';}}else if(oo.contType.indexOf('html')==0){if(fromThumb){html_div_cur.style.opacity=1;html_div_cur.style.display='block';}}var ws=getWinSize();var width=_this.width, height=_this.height, win_width=ws.w, win_height=ws.h;if(!hasTouch){if(de.scrollWidth>win_width){win_height-=15;}if(de.scrollHeight>win_height){win_width-=15;}}if(lb.links[lb.index].vwidth)width=lb.links[lb.index].vwidth;if(lb.links[lb.index].vheight)height=lb.links[lb.index].vheight;if((oo.contType=='htmlinline'||oo.contType=='htmlajax')&&(!width||!height)){var tmp=d.createElement('div');var s=tmp.style;s.position='absolute';s.left='-10000px';s.visibility='hidden';if(width)s.width=width+'px';if(height)s.height=height+'px';tmp.innerHTML=_this.innerHTML;var b=d.getElementsByTagName('body')[0];b.appendChild(tmp);width=tmp.offsetWidth;height=tmp.offsetHeight;b.removeChild(tmp);tmp=null;}var ratio;lb.zoomed=fullSize;ratio=Math.min(Math.min(Math.max(win_width-20,60),width)/width,Math.min(Math.max(win_height-20,60),height)/height);if(ratio>=0.99){lb.zoomed=false;}if(fullSize){ratio=1;}width=Math.round(ratio*width);height=Math.round(ratio*height);loading.style.display='none';outer.style.visibility='visible';if(!fromThumb){if(oo.contType=='img'){fadeTo(img, 1);}else if(oo.contType.indexOf('html')==0){fadeTo(html_div_cur, 1);}}moveTo([[lb,{left:Math.round((de.scrollLeft||d.body.scrollLeft)+(win_width-width)/2),top:Math.round((de.scrollTop||d.body.scrollTop)+(win_height-height)/2),width:width,height:height}],[inner,{height:height}]],function(){if(html_div_old!=null){inner.removeChild(html_div_old);html_div_old=null;}cross_img.style.display='none';if(oo.videourl){div_v.style.width='100%';if(lb.count==1){div_v.className=on+'_videonobg';}else{div_v.className='';}div_v.style.display='block';var getVideoHTML=function(){var vHtml;if(oo.vProvider=='youtube'){vHtml='<iframe width="'+div_v.offsetWidth+'" height="'+div_v.offsetHeight+'"  src="http://www.youtube.com/embed/'+oo.videourl+'?rel=0&amp;wmode=transparent&amp;autoplay=1" frameborder="0"></iframe>';}else if(oo.vProvider=='vimeo'){vHtml='<iframe width="'+div_v.offsetWidth+'" height="'+div_v.offsetHeight+'" src="http://player.vimeo.com/video/'+oo.videourl+'?autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';}return vHtml;};if(lb.count==1){div_v.innerHTML=getVideoHTML();}else{div_v.onclick=function(evt){this.innerHTML=getVideoHTML();playsVideo=true;var e=evt||window.event;e.stopPropagation? e.stopPropagation():(e.cancelBubble=true);}}}lb.currentType=oo.contType;fadeTo(close, 1);if(capText.innerHTML!=''){fadeTo(cap, 1);}preload();});fadeTo(overlay, 0.30);};var afterloadevent=function(){afterload(this);};var afterloadajax=function(){afterload(html_div_cur);};if(html_div_old!=null){inner.removeChild(html_div_old);html_div_old=null;}if(lb.currentType=='img'){cross_img.src=img.src;cross_img.style.display='block';}else if(lb.currentType.indexOf('html')==0){html_div_old=html_div_cur;html_div_old.style.zIndex=2;html_div_cur=null;}if(oo.contType=='img'){var imgPreloader=new Image();imgPreloader.onload=afterloadevent;imgPreloader.src=e.href;}else if(oo.contType.indexOf('html')==0){var newDiv=d.createElement('div');var s=newDiv.style;s.display='none';s.opacity=0;s.zIndex=3;newDiv.id=on+'_html';inner.insertBefore(newDiv, img);html_div_cur=newDiv;if(oo.contType=='htmlinframe'){var ifr=d.createElement('iframe');ifr.width='100%';ifr.height='100%';ifr.frameBorder='0';ifr.onload=afterloadevent;ifr.src=oo.iframeurl;html_div_cur.appendChild(ifr);}else if(oo.contType=='htmlajax'){ajax=new AjxAjax(oo.ajaxurl);ajax.onCompletion=afterloadajax;ajax.elementObj=html_div_cur;ajax.runAJAX();}else if(oo.contType=='htmlinline'){if(!oo.inlinehtml){var inlinehtml=d.getElementById(oo.inlineid);if(inlinehtml){oo.inlinehtml=[];var ch=inlinehtml.childNodes;for(var i=0;i<ch.length;++i){oo.inlinehtml[i]=ch[i];}while(ch.length){inlinehtml.removeChild(ch[0]);}}else{oo.inlinehtml=null;}}if(oo.inlinehtml!=null){for(var i=0;i<oo.inlinehtml.length;++i){html_div_cur.appendChild(oo.inlinehtml[i]);}}else{html_div_cur.innerHTML='';}afterload(html_div_cur);}}}}function getWinSize(){var w, h;if(self.innerHeight){w=self.innerWidth;h=self.innerHeight;}else if(de&&de.clientHeight){w=de.clientWidth;h=de.clientHeight;}else if(d.body){w=d.body.clientWidth;h=d.body.clientHeight;}return{h:h,w:w};}function getParamFromUrl(url,par){var val='';var reg=new RegExp('[?&](?:amp;)?'+par+'(?:=([^&]*))?');var token=reg.exec(url);if(token!=null){val=token[1];}return val;}function encodeURLParams(string, delParams){var varArray=string.split('&');var out=[];var j=0;for(i=0;i<varArray.length;i++){var urlVars=varArray[i].split('=');if(urlVars[0].indexOf('amp;')!=-1){urlVars[0]=urlVars[0].substring(4);}if(delParams.indexOf('!'+urlVars[0]+'!')<0){out[j++]=encodeURIComponent(urlVars[0])+'='+encodeURIComponent(urlVars[1]);}}return out.join('&');}function createDiv(id, parent){var div=d.createElement('div');if(id!=''){div.id=id;}parent.appendChild(div);return div;}function fixPng(e, width, height){var bg=createDiv('',e).style;bg.position='absolute';bg.width=width;bg.height=height;bg.left=e.currentStyle.backgroundPositionX;bg.top=e.currentStyle.backgroundPositionY;bg.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale, src='"+e.currentStyle.backgroundImage.split(/\"/)[1]+"')";e.style.background='';e.style.overflow='hidden';}function moveTo(pairs, f){var oldpos=new Array();for(var i=0;i<pairs.length;i++){oldpos[i]=new Object;for(var n in pairs[i][1])oldpos[i][n]=parseInt(pairs[i][0].style[n]);}var tstart=new Date;var e=pairs[0][0];if(e.mtimer)clearInterval(e.mtimer);e.mtimer=setInterval(function(){var s=(new Date-tstart)/500;if(s>1)s=1;var v=((-Math.cos(s*Math.PI)/2)+0.5);for(var i=0;i<pairs.length;i++){for(var n in pairs[i][1])pairs[i][0].style[n]=(pairs[i][1][n]-oldpos[i][n])*v+oldpos[i][n]+'px';}if(s==1){clearInterval(e.mtimer);if(f)f();}}, 10);}function fadeTo(e, opacity, speed, f){var so=parseFloat(e.style.opacity);var tstart=new Date;if(!speed)speed=500;if(e.timerf)clearInterval(e.timerf);e.timerf=setInterval(function(){var s=(new Date-tstart)/speed;if(s>1)s=1;var v=so+(opacity-so)*s;e.style.opacity=v;e.style.filter='alpha(opacity='+v*100+')';e.style.display='block';if(s==1){clearInterval(e.timerf);if(opacity==1)e.style.filter='';if(opacity==0)e.style.display='none';if(f)f();}}, 10);}function addOnReady(f,fu){var isReady=false;ready=function(){if(!isReady){isReady=true;f();};};if(d.addEventListener){d.addEventListener('DOMContentLoaded',ready,false);window.addEventListener('load',ready,false);window.addEventListener('unload',fu,false);}if(window.attachEvent)window.attachEvent('onload',ready);if(d.documentElement.doScroll&&window==top){(function(){if(!isReady){try{d.documentElement.doScroll('left');}catch(E){setTimeout(arguments.callee,0);return;}ready();}})()}}function getPosition(e){var x=0, y=0;while(e){x+=e.offsetLeft;y+=e.offsetTop;e=e.offsetParent;}return{x:x, y:y};}addOnReady(onLoad, onLoad);})();